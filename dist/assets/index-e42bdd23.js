import{u as W,r as p,a as E,h as G,i as q,a3 as J,X as V,j as e,R as g,C as Y,b as r,c as v,n as z,o as X,F as Z,p as Q,q as I,s as ee,L as N,I as y,t as S,a4 as ae,B as K,Y as se,Z as le,a5 as ne,a6 as te,a7 as ie,w as re,x as oe,T as me}from"./index-4ff297c6.js";import{T as ce}from"./TabContent-c1d86848.js";import{B as de}from"./Breadcrumb-95061577.js";import{M as ue}from"./Modals-dcd88d94.js";const L=[{link:"/",label:"Beranda"},{link:"/user-management/tabel-user",label:"User Management"}],xe=[{value:"L",label:"Laki-Laki"},{value:"P",label:"Perempuan"}],ge=[{value:"Ya",label:"Ya"},{value:"Tidak",label:"Tidak"}],ve=[{value:"NON ASN KKP",label:"NON ASN KKP"},{value:"ASN DINAS",label:"ASN DINAS"},{value:"NON ASN DINAS",label:"NON ASN DINAS"},{value:"NGO / LSM / Asosiasi",label:"NGO / LSM / Asosiasi"}],ye=[{value:"PNS",label:"PNS"},{value:"PPPK",label:"PPPK"}],Se=[{value:"ARUNA",label:"ARUNA"},{value:"HNSI",label:"HNSI"},{value:"KNTI",label:"KNTI"},{value:"MDPI",label:"MDPI"},{value:"NELANGSA",label:"NELANGSA"},{value:"USAID Ber-IKAN",label:"USAID Ber-IKAN"},{value:"WWF",label:"WWF"}],Pe=[{value:"PNS",label:"PNS"},{value:"P3K",label:"P3K"},{value:"Penyuluh Perikanan Bantu (PPB)",label:"Penyuluh Perikanan Bantu (PPB)"}],_e=[{value:"AHU",label:"AHU"},{value:"NON_AHU",label:"NON AHU"}];function Ae(){var k;document.title="User Management | AHU RI";const j=W(),[P,D]=p.useState(""),[_,O]=p.useState(!1),b=new me,F=E(),{list_dropdown_roles:h}=G(l=>l.Usman);p.useEffect(()=>{j(q(L)),j(J()),j(V())},[]);const f=()=>{O(!_),document.body.classList.add("no_padding")},B=l=>{const o=[...new Map(l.jenisUsman.map(a=>{var s;return[(s=a.jenis_role)==null?void 0:s.code,a]})).values()],m=o==null?void 0:o.map((a,s)=>{var n;return{[`r_roles_code[${s}]`]:((n=a.jenis_role)==null?void 0:n.code)||""}}),i={fullname:ne(l.fullname),username:l.username,password:l.password,valid:1,deleted:0,...m.reduce((a,s)=>({...a,...s}),{})},u=Object.fromEntries(Object.entries(i).filter(([a,s])=>s));D(u),f()},H=async()=>{try{b.customShowLoading({msg:"Menyimpan Data..."}),console.log("py",P),await te(ie,P),re("Sukses"),F("/user-management/tabel-user")}catch(l){oe(l)}finally{b.close()}f()},R=Array.from(new Map((k=h==null?void 0:h.data)==null?void 0:k.map(l=>[l.code,l])).values()),A=()=>{b.customWarningMsg("Harap Lengkapi dan Cek Kembali Inputan Anda")};return e.jsx(g.Fragment,{children:e.jsxs("div",{className:"page-content",children:[e.jsx(de,{content:L,title:"Tambah User Management"}),e.jsx(Y,{fluid:!0,children:e.jsx(r,{children:e.jsx(v,{lg:"12",children:e.jsx(z,{children:e.jsx(X,{className:"p-5",children:e.jsx("div",{className:"wizard clearfix",children:e.jsx("div",{className:"content clearfix",children:e.jsx(ce,{className:"body pt-0",children:e.jsx(Z,{initialValues:{identifier:"",fullname:"",nik:"",no_hp:"",email:"",alamat:"",ngo_lsm_asosiasi:"",status_kepegawaian:"",eselon_1:"",eselon_2:"",upt:"",username:"",prov:"",kab:"",wilayah_prov:"",wilayah_kab:"",jenisUsman:[{jenis_role:"",jenis_modul:""}],penyuluh:"",status_penyuluh:""},validationSchema:Q({fullname:I().required("Nama Lengkap Wajib Diisi"),username:I().required("Username Wajib Diisi")}),onSubmit:(l,{setSubmitting:o,validateForm:m})=>{m().then(i=>{Object.keys(i).length>0?A():B(l),o(!1)})},children:({handleChange:l,setValues:o,setFieldValue:m,handleBlur:i,handleSubmit:u,values:a,errors:s,touched:n,validateForm:T})=>{var w;return p.useMemo(()=>{var c;switch((c=a.identifier)==null?void 0:c.value){case"AHU":return{nip:!0,fullname:!0,nik:!0,no_hp:!0,email:!0,alamat:!0,prov:!0,kab:!0,eselon_1:!0,eselon_2:!0,upt:!0,status_kepegawaian_kkp:!0,penyuluh:!0,username:!0,role:!0};case"NON_AHU":return{fullname:!0,nik:!0,no_hp:!0,email:!0,alamat:!0,prov:!0,kab:!0,status_kepegawaian_NON_AHU:!0,ngo_lsm_asosiasi:!0,penyuluh:!0,username:!0,role:!0};default:return{}}},[(w=a.identifier)==null?void 0:w.value]),e.jsxs(ee,{onSubmit:u,className:"needs-validation",children:[e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"validationCustom01",className:"col-md-2 col-form-label",children:"Nama Lengkap"}),e.jsx("div",{className:"col-md-10",children:e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx(y,{name:"fullname",placeholder:"Nama Lengkap",type:"text",id:"validation1",onChange:l,onBlur:i,value:a.fullname,className:`form-control ${n.fullname&&s.fullname?"is-invalid":""}`}),n.fullname&&s.fullname?e.jsx(S,{type:"invalid",children:s.fullname}):null]})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"validationCustom02",className:"col-md-2 col-form-label",children:"Username"}),e.jsx("div",{className:"col-md-10",children:e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx(y,{name:"username",placeholder:"Username",type:"text",id:"validation3",onChange:l,onBlur:i,value:(a==null?void 0:a.username)||"",className:`form-control input-type-number ${n.username&&s.username?"is-invalid":""}`}),n.username&&s.username?e.jsx(S,{type:"invalid",children:s.username}):null]})})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(N,{htmlFor:"validationCustom02",className:"col-md-2 col-form-label",children:"Password"}),e.jsx("div",{className:"col-md-10",children:e.jsxs("div",{className:"d-flex flex-column align-items-start",children:[e.jsx(y,{name:"password",placeholder:"Password",type:"password",id:"validation3",onChange:l,onBlur:i,value:(a==null?void 0:a.password)||"",className:`form-control input-type-number ${n.password&&s.password?"is-invalid":""}`}),n.password&&s.password?e.jsx(S,{type:"invalid",children:s.password}):null]})})]}),e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"mb-3",children:e.jsx("div",{children:e.jsx(g.Fragment,{children:e.jsx(ae,{name:"jenisUsman",children:({push:c,remove:x})=>{var U;return e.jsx(g.Fragment,{children:(U=a==null?void 0:a.jenisUsman)==null?void 0:U.map((pe,t)=>e.jsxs(r,{className:"bg-secondary bg-opacity-10 p-4 rounded mb-3",style:{rowGap:".5rem"},children:[e.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[e.jsx("div",{className:"fw-bold",children:"Hak Akses / Role"}),e.jsxs("div",{className:"d-flex",children:[e.jsx(K,{type:"button",color:"success",className:"btn-sm rounded me-2",onClick:()=>c({jenis_modul:"",jenis_role:""}),children:e.jsx("i",{className:"bx bx-plus fs-5"})}),t>0&&e.jsx(K,{type:"button",color:"danger",className:"btn-sm rounded",onClick:()=>x(t),children:e.jsx("i",{className:"bx bx-trash-alt fs-5"})})]})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(v,{md:2,children:e.jsx(N,{htmlFor:"validationCustom01",className:"col-form-label pb-0",children:"Jenis Role"})}),e.jsx(v,{md:10,children:e.jsx(se,{getOptionValue:d=>d.code,getOptionLabel:d=>d.title,onChange:d=>{var M;((M=a.jenisUsman)==null?void 0:M.find($=>{var C;return((C=$.jenis_role)==null?void 0:C.code)==d.code}))?m(`jenisUsman.${t}.jenis_role`,null):m(`jenisUsman.${t}.jenis_role`,d)},options:R,styles:le,value:a.jenisUsman[t].jenis_role,id:`jenisUsman.${t}.jenis_role`,name:`jenisUsman.${t}.jenis_role`,placeholder:"Pilih Jenis Role"})})]})]},t))})}})})})}),e.jsx("div",{className:"actions clearfix justify-content-end d-flex",children:e.jsx("button",{type:"button",onClick:c=>{c.preventDefault(),T().then(x=>{Object.keys(x).length>0?(u(),A(),console.log("formik",a)):u()})},className:"btn btn-primary",children:"Simpan"})})]})]})}})})})})})})})})}),e.jsx(ue,{modalBackdrop:_,modalPopup:f,approve:()=>H()})]})})}export{Ae as default,_e as optIdentifier,xe as optJnsKelamin,Se as optNGOLSM,ge as optPenyuluh,ye as optStatusPegawaiKKP,ve as optStatusPegawaiNonKKP,Pe as optStatusPenyuluh};
